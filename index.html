<!DOCTYPE html>
<html lang="zxx" class="js">

<head>
    <meta charset="utf-8">
    <meta name="author" content="Softnio">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description"
        content="A powerful and conceptual apps base dashboard template that especially build for developers and programmers.">
    <link rel="shortcut icon" href="/demo7/images/favicon.png">
    <title>Login AEDUS</title>
    <link rel="stylesheet" href="/styles/style.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-91615293-4"></script>
</head>

<body class="nk-body ui-rounder npc-default pg-auth">
    <div class="nk-app-root">
        <div class="nk-main ">
            <div class="nk-wrap nk-wrap-nosidebar">
                <div class="nk-content ">
                    <div class="nk-split nk-split-page nk-split-lg">
                        <div class="nk-split-content nk-block-area nk-block-area-column nk-auth-container bg-white">
                            <div class="absolute-top-right d-lg-none p-3 p-sm-5">
                                <a href="#" class="toggle btn-white btn btn-icon btn-light" data-target="athPromo">
                                    <em class="icon ni ni-info"></em>
                                </a>
                            </div>
                            <div class="nk-block nk-block-middle nk-auth-body">
                                <div class="brand-logo pb-5">
                                    <a href="/index.html" class="logo-link">
                                        <img class="logo-light logo-img logo-img-lg"
                                            src="/assets/images/logoaedus.png"
                                            srcset="/assets/images/logoaedus.png 2x" alt="logo">
                                        <img class="logo-dark logo-img logo-img-lg"
                                            src="/assets/images/logoaedus.png"
                                            srcset="/assets/images/logoaedus.png 2x" alt="logo-dark">
                                    </a>
                                </div>
                                <div class="nk-block-head">
                                    <div class="nk-block-head-content">
                                        <h5 class="nk-block-title">Sign-In</h5>
                                        <div class="nk-block-des">
                                            <p>Access the AEDUS dashboard panel using your email and passcode.</p>
                                        </div>
                                    </div>
                                </div>
                                <form action="#" class="form-validate is-alter" autocomplete="off" id="loginForm">
                                    <div class="form-group">
                                        <div class="form-label-group">
                                            <label class="form-label" for="email-address">Email or Username</label>

                                        </div>
                                        <div class="form-control-wrap">
                                            <input autocomplete="off" type="text" class="form-control form-control-lg"
                                                type="email" name="email" placeholder="Email" required 
                                                >
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="form-label-group">
                                            <label class="form-label" for="password">Passcode</label>
                                            <a class="link link-primary link-sm" tabindex="-1"
                                                href="/demo7/pages/auths/auth-reset.html">Forgot Code?</a>
                                        </div>
                                        <div class="form-control-wrap">
                                            <a tabindex="-1" href="#"
                                                class="form-icon form-icon-right passcode-switch lg"
                                                data-target="password">

                                                <img src="/assets/images/eye.svg"
                                                    class="passcode-icon icon-show icon ni ni-eye" alt="">
                                                <img src="/assets/images/eyeslash.svg"
                                                    class="passcode-icon icon-hide icon ni ni-eye-off" alt="">

                                            </a>
                                            <input autocomplete="new-password" type="password"  id="password"
                                                class="form-control form-control-lg" type="password" name="password" placeholder="Password" required 
                                              >
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <button class="btn btn-lg btn-primary btn-block">Sign in</button>
                                    </div>
                                </form>
                                <div class="text-center pt-4 pb-3">
                                    <h6 class="overline-title overline-title-sap">
                                        <span>OR</span>
                                    </h6>
                                </div>
                                <ul class="nav justify-center gx-4">

                                    <li class="nav-item">
                                        <a class="link link-primary fw-normal py-2 px-3" href="#">Google</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="nk-block nk-auth-footer">
                                <div class="nk-block-between">
                                    <ul class="nav nav-sm">
                                        <li class="nav-item">
                                            <a class="link link-primary fw-normal py-2 px-3" href="#">Terms &
                                                Condition</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="link link-primary fw-normal py-2 px-3" href="#">Privacy Policy</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="link link-primary fw-normal py-2 px-3" href="#">Help</a>
                                        </li>
                                        <li class="nav-item dropup">
                                            <a class="dropdown-toggle  has-indicator link link-primary fw-normal py-2 px-3"
                                                data-bs-toggle="dropdown" data-offset="0,10">
                                                <small>English</small>
                                            </a>
                                            <div class="dropdown-menu dropdown-menu-sm dropdown-menu-end">
                                                <ul class="language-list">
                                                    <li>
                                                        <a href="#" class="language-item">
                                                            <img src="/assets/images/usflag.jpg" alt=""
                                                                class="language-flag">
                                                            <span class="language-name">English</span>
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a href="#" class="language-item">
                                                            <img src="/assets/images/algeriaflag.jpg" alt=""
                                                                class="language-flag">
                                                            <span class="language-name">Arabic</span>
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a href="#" class="language-item">
                                                            <img src="/assets/images/franceflag.jpg" alt=""
                                                                class="language-flag">
                                                            <span class="language-name">Français</span>
                                                        </a>
                                                    </li>

                                                </ul>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                <div class="mt-3">
                                    <p>&copy;2025 AEDUS. All Rights Reserved.</p>
                                </div>
                            </div>
                        </div>
                        <div class="nk-split-content nk-split-stretch bg-lighter d-flex toggle-break-lg toggle-slide toggle-slide-right"
                            data-toggle-body="true" data-content="athPromo" data-toggle-screen="lg"
                            data-toggle-overlay="true">
                            <div class="nk-feature-img">
                                <img class="round" src="/assets/images/logindashboard.png"
                                    srcset="/assets/images/logindashboard.png 2x" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <script>
  

        document.getElementById("loginForm").addEventListener("submit", async (e) => {
            e.preventDefault();

            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());
            console.log(data);

            try {
                const res = await fetch(`http://localhost:3000/api/auth/login/admin`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(data)
                });

                const result = await res.json();
                console.log(result);

                if (res.ok && result.token) {
                    // sauvegarde du token en localStorage
                    localStorage.setItem("token", result.token);
                    alert(`Connexion réussie en tant que admin`);
                } else {
                    alert("Erreur: " + (result.error || JSON.stringify(result)));
                }
            } catch (err) {
                console.error(err);
                alert("Une erreur est survenue");
            }
        });
    </script>


    <script src="/scripts/bundle.js"></script>
    <script src="/scripts/scripts.js"></script>
    <script src="/scripts/settings.js"></script>

</html>